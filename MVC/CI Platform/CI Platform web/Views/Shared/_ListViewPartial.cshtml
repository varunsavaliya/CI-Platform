@model CI_Platform.Entities.ViewModels.LandingPageModel;
@{
    var UserId = ViewBag.UserId;
    UserId = long.Parse(UserId);
}

<div class="container">
    <!-- card 1 -->
    @foreach (var card in Model.MissionList)
    {
        <div>
            <div class="card list-card">
                @{
                    double avgRating = 0;
                    @if (card.MissionRatings.Any())
                    {
                        avgRating = card.MissionRatings.Average(r => r.Rating);
                    }
                }
                @*for comparing skills with selected skills*@
                @foreach (var skill in card.MissionSkills)
                {
                    <p class="d-none mission-skills">@skill.Skill.SkillName</p>
                }
                <p class="d-none mission-country">@card.Country.Name</p>
                <p class="created-date d-none">@card.CreatedAt.ToString("dd/MM/yyyy HH:mm:ss")</p>

                <div class="row">
                    <div class="col-md-6 col-lg-4">
                        <div class="card-image h-100">
                            <img class="card-img-top h-100"
                                 src="~/images/Grow-Trees-On-the-path-to-environment-sustainability-1.png"
                                 alt="Card image cap" />

                            <!-- location favourite and pause mission  -->
                            <div class="card-items">
                                <a href="#" class="location d-inline">
                                    <img src="~/images/pin.png" alt="location" />
                                    <span>@card.City.Name</span>
                                </a>
                                <a href="#" class="card-img-icon fav">
                                    @{
                                        var flag = 1;
                                    }
                                    @foreach (var fm in card.FavoriteMissions)
                                    {
                                        @if (fm.UserId.Equals(UserId))
                                        {
                                            <i class="bi bi-heart-fill favorite-button filled-heart text-danger" data-mission-id="@card.MissionId"></i>
                                            flag = 0;
                                        }

                                    }
                                    @if (flag == 1)
                                    {
                                        <i class="bi bi-heart favorite-button empty-heart text-light" data-mission-id="@card.MissionId"></i>
                                    }
                                    @*<img src="~/images/heart.png" alt="like" />*@
                                </a>
                                <a href="#" class="card-img-icon pause-mission-icon">
                                    <img src="~/images/user.png" alt="add-mission" />
                                </a>
                            </div>

                            <!-- mission theme capsule -->
                            <div class="mission-theme mission-theme-list-view">
                                <h3>@card.Theme.Title</h3>
                            </div>
                        </div>
                    </div>

                    <!-- card content -->
                    <div class="col-md-6 col-lg-8">
                        <div class="row">
                            <div class="col">
                                <div class="border-0">
                                    <h2 class="card-title mt-3">
                                        @card.Title
                                    </h2>
                                    <p class="card-description">
                                        @card.ShortDescription
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- organization and rating -->
                        <div class="row gx-0 ">
                            <div class="col-md-12 col-lg-6 mt-md-2">
                                <div class="organization-rating mb-3 organization-rating-list-view border-0 text-start d-flex align-items-center">
                                    <p class="organization mb-0 d-flex justify-content-md-between justify-content-lg-start column-gap-lg-3 card-text-medium">
                                        @card.OrganizationName
                                    </p>
                                    <div class="rating">
                                        @for (int i = 0; i < avgRating; i++)
                                        {
                                            <span><img src="~/images/selected-star.png" alt=""></span>
                                        }@for (int i = 0; i < 5 - avgRating; i++)
                                        {
                                            <span><img src="~/images/star.png" alt=""></span>
                                        }
                                    </div>
                                </div>

                                <button class="align-left card-button card-button-list-view d-flex justify-content-between align-items-center">
                                    Apply
                                    <img src="~/images/right-arrow.png" alt="" />
                                    <img src="~/images/right-arrow2.png" alt="" />
                                </button>
                            </div>

                            <div class="mission-details col-md-12 col-lg-6 ms-auto mt-md-4 border-top">
                                <div class="mission-date">
                                    @if (card.MissionType == "Time")
                                    {
                                        <p>From @card.StartDate.Value.ToShortDateString() until @card.EndDate.Value.ToShortDateString()</p>
                                    }
                                    else
                                    {
                                        @foreach (var goal in card.GoalMissions)
                                        {
                                            <p>@goal.GoalObjectiveText</p>
                                        }
                                    }
                                </div>
                                <div class="row gutter mt-3 justify-content-around position-relative">
                                    <div class="col seats-detail d-flex align-items-center">
                                        <img src="~/images/Seats-left.png"
                                             alt="star" />
                                        <div class="d-flex flex-column">
                                            @{
                                                var seatsFilled = 0;
                                                @if (card.MissionApplications.Any(sl => sl.ApprovalStatus.Contains("published")))
                                                {
                                                    seatsFilled = card.MissionApplications.Count(sl => sl.ApprovalStatus.Equals("published"));
                                                }
                                                var seatsLeft = card.TotalSeats - seatsFilled;
                                            }
                                            <p class="seats-left">@seatsLeft</p>
                                            <p>Seats left</p>
                                        </div>
                                    </div>
                                    <div class="col duration-detail d-flex align-items-center">
                                        <img class="icon-detail"
                                             src="~/images/deadline.png"
                                             alt="star" />
                                        <div class="d-flex flex-column">
                                            @{
                                                TimeSpan ts1 = new TimeSpan(1, 0, 0, 0);
                                                var deadline = @card.StartDate - ts1;
                                            }
                                            <p>@deadline.Value.ToShortDateString()</p>
                                            <p>Deadline</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
</div>
@*<!-- card 2 -->
    <div>
    <div class="card list-card">
    <div class="row">
    <div class="col-md-6 col-lg-4">
    <div class="card-image h-100">
    <img class="h-100"
    src="~/images/Education-Supplies-for-Every--Pair-of-Shoes-Sold-1.png"
    alt="Card Image"
    />

    <!-- location favourite and pause mission  -->
    <div class="card-items">
    <a href="#" class="location d-inline">
    <img src="~/images/pin.png" alt="location" />
    <span>Melbourne</span>
    </a>
    <a href="#" class="card-img-icon fav">
    <img src="~/images/heart.png" alt="like" />
    </a>
    <a href="#" class="card-img-icon pause-mission-icon">
    <img src="~/images/user.png" alt="add-mission" />
    </a>
    </div>

    <!-- mission theme capsule -->
    <div class="mission-theme mission-theme-list-view">
    <h3>Environment</h3>
    </div>
    </div>
    </div>

    <!-- card content -->
    <div class="col-md-6 col-lg-8">
    <div class="row">
    <div class="col">
    <div class="border-0">
    <h2 class="card-title mt-3">
    Education Supplies for Every Pair of Shoes Sold
    </h2>
    <p class="card-description">
    Some quick example text to build on the card title and make
    up the bulk of the card's content.
    </p>
    </div>
    </div>
    </div>

    <!-- organization and rating -->
    <div class="row">
    <div class="col-md-12 col-lg-6 mt-md-2">
    <div
    class="organization-rating mb-3 organization-rating-list-view border-0 text-start d-flex align-items-center"
    >
    <p
    class="organization mb-0 d-flex justify-content-md-between justify-content-lg-start column-gap-lg-3 card-text-medium"
    >
    Australian Paradise
    </p>
    <div class="rating">
    <img src="~/images/selected-star.png" /><img
    src="~/images/selected-star.png"
    /><img src="~/images/selected-star.png" /><img
    src="~/images/selected-star.png"
    /><img src="~/images/selected-star.png" />
    </div>
    </div>

    <button
    class="align-left card-button card-button-list-view d-flex justify-content-between align-items-center"
    >
    Apply
    <img src="~/images/right-arrow.png" alt="" />
    <img src="~/images/right-arrow2.png" alt="" />
    </button>
    </div>

    <div
    class="mission-details col-md-12 col-lg-6 ms-auto mt-md-4 border-top"
    >
    <div class="">
    <p class="mission-date">From 10/01/2019 until 25/02/2019</p>
    <div
    class="row gutter mt-3 justify-content-around position-relative"
    >
    <div class="col seats-detail d-flex align-items-center">
    <img
    src="~/images/Already-volunteered.png"
    alt="star"
    />
    <div class="d-flex flex-column">
    <p>250</p>
    <p>Already Volunteered</p>
    </div>
    </div>
    <div class="col duration-detail d-flex align-items-center">
    <img
    class="icon-detail"
    src="~/images/deadline.png"
    alt="star"
    />
    <div class="d-flex flex-column">
    <p>09/01/2019</p>
    <p>Deadline</p>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>

    <!-- card 3 -->
    <div>
    <div class="card list-card">
    <div class="row">
    <div class="col-md-6 col-lg-4">
    <div class="card-image h-100">
    <img class="h-100"
    src="~/images/Nourish-the-Children-in--African-country-1.png"
    alt="Card Image"
    />

    <!-- location favourite and pause mission  -->
    <div class="card-items">
    <a href="#" class="location d-inline">
    <img src="~/images/pin.png" alt="location" />
    <span>Barcelona</span>
    </a>
    <a href="#" class="card-img-icon fav">
    <img src="~/images/heart.png" alt="like" />
    </a>
    <a href="#" class="card-img-icon pause-mission-icon">
    <img src="~/images/user.png" alt="add-mission" />
    </a>
    </div>

    <!-- mission theme capsule -->
    <div class="mission-theme mission-theme-list-view">
    <h3>Nutrition</h3>
    </div>
    </div>
    </div>

    <!-- card content -->
    <div class="col-md-6 col-lg-8">
    <div class="row">
    <div class="col">
    <div class="border-0">
    <h2 class="card-title mt-3">
    Nourish the Children in African country
    </h2>
    <p class="card-description">
    Some quick example text to build on the card title and make
    up the bulk of the card's content.
    </p>
    </div>
    </div>
    </div>

    <!-- organization and rating -->
    <div class="row">
    <div class="col-md-12 col-lg-6 mt-md-2">
    <div
    class="organization-rating mb-3 organization-rating-list-view border-0 text-start d-flex align-items-center"
    >
    <p
    class="organization mb-0 d-flex justify-content-md-between justify-content-lg-start column-gap-lg-3 card-text-medium"
    >
    The Hunger
    </p>
    <div class="rating">
    <img src="~/images/selected-star.png" /><img
    src="~/images/selected-star.png"
    /><img src="~/images/selected-star.png" /><img
    src="~/images/selected-star.png"
    /><img src="~/images/selected-star.png" />
    </div>
    </div>

    <button
    class="align-left card-button card-button-list-view d-flex justify-content-between align-items-center"
    >
    Apply
    <img src="~/images/right-arrow.png" alt="" />
    <img src="~/images/right-arrow2.png" alt="" />
    </button>
    </div>

    <div
    class="mission-details col-md-12 col-lg-6 ms-auto mt-md-4 border-top"
    >
    <div class="">
    <p class="mission-date">From 10/01/2019 until 25/02/2019</p>
    <div
    class="row gutter mt-3 justify-content-around position-relative"
    >
    <div class="col seats-detail d-flex align-items-center">
    <img
    src="~/images/Seats-left.png"
    alt="star"
    />
    <div class="d-flex flex-column">
    <p>10</p>
    <p>Seats left</p>
    </div>
    </div>
    <div class="col duration-detail d-flex align-items-center">
    <img
    class="icon-detail"
    src="~/images/deadline.png"
    alt="star"
    />
    <div class="d-flex flex-column">
    <p>09/01/2019</p>
    <p>Deadline</p>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>

    <!-- card 4 -->
    <div>
    <div class="card list-card">
    <div class="row">
    <div class="col-md-6 col-lg-4">
    <div class="card-image h-100">
    <img class="h-100"
    src="~/images/CSR-initiative-stands-for-Coffee--and-Farmer-Equity-1.png"
    alt="Card Image"
    />

    <!-- location favourite and pause mission  -->
    <div class="card-items">
    <a href="#" class="location d-inline">
    <img src="~/images/pin.png" alt="location" />
    <span>London</span>
    </a>
    <a href="#" class="card-img-icon fav">
    <img src="~/images/heart.png" alt="like" />
    </a>
    <a href="#" class="card-img-icon pause-mission-icon">
    <img src="~/images/user.png" alt="add-mission" />
    </a>
    </div>

    <!-- mission theme capsule -->
    <div class="mission-theme mission-theme-list-view">
    <h3>Environment</h3>
    </div>
    </div>
    </div>

    <!-- card content -->
    <div class="col-md-6 col-lg-8">
    <div class="row">
    <div class="col">
    <div class="border-0">
    <h2 class="card-title mt-3">
    CSR initiative stands for Coffee and Farmer Equity
    </h2>
    <p class="card-description">
    Some quick example text to build on the card title and make
    up the bulk of the card's content.
    </p>
    </div>
    </div>
    </div>

    <!-- organization and rating -->
    <div class="row">
    <div class="col-md-12 col-lg-6 mt-md-2">
    <div
    class="organization-rating mb-3 organization-rating-list-view border-0 text-start d-flex align-items-center"
    >
    <p
    class="organization mb-0 d-flex justify-content-md-between justify-content-lg-start column-gap-lg-3 card-text-medium"
    >
    CSE Network
    </p>
    <div class="rating">
    <img src="~/images/selected-star.png" /><img
    src="~/images/selected-star.png"
    /><img src="~/images/selected-star.png" /><img
    src="~/images/selected-star.png"
    /><img src="~/images/selected-star.png" />
    </div>
    </div>

    <button
    class="align-left card-button card-button-list-view d-flex justify-content-between align-items-center"
    >
    Apply
    <img src="~/images/right-arrow.png" alt="" />
    <img src="~/images/right-arrow2.png" alt="" />
    </button>
    </div>

    <div
    class="mission-details col-md-12 col-lg-6 ms-auto mt-md-4 border-top"
    >
    <div class="">
    <p class="mission-date">Ongoing Oportunity</p>
    <div
    class="row gutter mt-3 justify-content-around position-relative"
    >
    <div class="col seats-detail d-flex align-items-center">
    <img
    src="~/images/Already-volunteered.png"
    alt="star"
    />
    <div class="d-flex flex-column">
    <p>250</p>
    <p>Already volunteered</p>
    </div>
    </div>
    <div class="col duration-detail d-flex align-items-center">
    <img
    class="icon-detail"
    src="~/images/deadline.png"
    alt="star"
    />
    <div class="d-flex flex-column">
    <p>09/01/2019</p>
    <p>Deadline</p>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>

    <!-- card 5 -->
    <div>
    <div class="card list-card">
    <div class="row">
    <div class="col-md-6 col-lg-4">
    <div class="card-image h-100">
    <img class="h-100"
    src="~/images/Animal-welfare-&-save-birds-campaign-1.png"
    alt="Card Image"
    />

    <!-- location favourite and pause mission  -->
    <div class="card-items">
    <a href="#" class="location d-inline">
    <img src="~/images/pin.png" alt="location" />
    <span>Cape Town</span>
    </a>
    <a href="#" class="card-img-icon fav">
    <img src="~/images/heart.png" alt="like" />
    </a>
    <a href="#" class="card-img-icon pause-mission-icon">
    <img src="~/images/user.png" alt="add-mission" />
    </a>
    </div>

    <!-- mission theme capsule -->
    <div class="mission-theme mission-theme-list-view">
    <h3>Animals</h3>
    </div>
    </div>
    </div>

    <!-- card content -->
    <div class="col-md-6 col-lg-8">
    <div class="row">
    <div class="col">
    <div class="border-0">
    <h2 class="card-title mt-3">
    Animal welfare & save birds campaign
    </h2>
    <p class="card-description">
    Some quick example text to build on the card title and make
    up the bulk of the card's content.
    </p>
    </div>
    </div>
    </div>

    <!-- organization and rating -->
    <div class="row">
    <div class="col-md-12 col-lg-6 mt-md-2">
    <div
    class="organization-rating mb-3 organization-rating-list-view border-0 text-start d-flex align-items-center"
    >
    <p
    class="organization mb-0 d-flex justify-content-md-between justify-content-lg-start column-gap-lg-3 card-text-medium"
    >
    JR Foundation
    </p>
    <div class="rating">
    <img src="~/images/selected-star.png" /><img
    src="~/images/selected-star.png"
    /><img src="~/images/selected-star.png" /><img
    src="~/images/selected-star.png"
    /><img src="~/images/selected-star.png" />
    </div>
    </div>

    <button
    class="align-left card-button card-button-list-view d-flex justify-content-between align-items-center"
    >
    Apply
    <img src="~/images/right-arrow.png" alt="" />
    <img src="~/images/right-arrow2.png" alt="" />
    </button>
    </div>

    <div
    class="mission-details col-md-12 col-lg-6 ms-auto mt-md-4 border-top"
    >
    <div class="">
    <p class="mission-date">Ongoing Oportunity</p>
    <div
    class="row gutter mt-3 justify-content-around position-relative"
    >
    <div class="col seats-detail d-flex align-items-center">
    <img
    src="~/images/Seats-left.png"
    alt="star"
    />
    <div class="d-flex flex-column">
    <p>10</p>
    <p>Seats left</p>
    </div>
    </div>
    <div class="col duration-detail d-flex align-items-center">
    <img src="~/images/achieved.png" alt="" />
    <div class="d-flex flex-column">
    <div class="progress">
    <div
    class="progress-bar"
    role="progressbar"
    style="width: 75%"
    aria-valuenow="75"
    aria-valuemin="0"
    aria-valuemax="100"
    ></div>
    </div>
    <p>8000 Achieved</p>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>

    <!-- card 6 -->
    <div>
    <div class="card list-card">
    <div class="row">
    <div class="col-md-6 col-lg-4">
    <div class="card-image h-100">
    <img class="h-100"
    src="~/images/Plantation-and-Afforestation-programme-1.png"
    alt="Card Image"
    />

    <!-- location favourite and pause mission  -->
    <div class="card-items">
    <a href="#" class="location d-inline">
    <img src="~/images/pin.png" alt="location" />
    <span>Paris</span>
    </a>
    <a href="#" class="card-img-icon fav">
    <img src="~/images/heart.png" alt="like" />
    </a>
    <a href="#" class="card-img-icon pause-mission-icon">
    <img src="~/images/user.png" alt="add-mission" />
    </a>
    </div>

    <!-- mission theme capsule -->
    <div class="mission-theme mission-theme-list-view">
    <h3>Health</h3>
    </div>
    </div>
    </div>

    <!-- card content -->
    <div class="col-md-6 col-lg-8">
    <div class="row">
    <div class="col">
    <div class="border-0">
    <h2 class="card-title mt-3">
    Plantation and Afforestation Programme
    </h2>
    <p class="card-description">
    Some quick example text to build on the card title and make
    up the bulk of the card's content.
    </p>
    </div>
    </div>
    </div>

    <!-- organization and rating -->
    <div class="row">
    <div class="col-md-12 col-lg-6 mt-md-2">
    <div
    class="organization-rating mb-3 organization-rating-list-view border-0 text-start d-flex align-items-center"
    >
    <p
    class="organization mb-0 d-flex justify-content-md-between justify-content-lg-start column-gap-lg-3 card-text-medium"
    >
    Amaze Doctors
    </p>
    <div class="rating">
    <img src="~/images/selected-star.png" /><img
    src="~/images/selected-star.png"
    /><img src="~/images/selected-star.png" /><img
    src="~/images/selected-star.png"
    /><img src="~/images/selected-star.png" />
    </div>
    </div>

    <button
    class="align-left card-button card-button-list-view d-flex justify-content-between align-items-center"
    >
    Apply
    <img src="~/images/right-arrow.png" alt="" />
    <img src="~/images/right-arrow2.png" alt="" />
    </button>
    </div>

    <div
    class="mission-details col-md-12 col-lg-6 ms-auto mt-md-4 border-top"
    >
    <div class="">
    <p class="mission-date">Ongoing Oportunity</p>
    <div
    class="row gutter mt-3 justify-content-around position-relative"
    >
    <div class="col duration-detail d-flex align-items-center">
    <img src="~/images/achieved.png" alt="" />
    <div class="d-flex flex-column">
    <div class="progress">
    <div
    class="progress-bar"
    role="progressbar"
    style="width: 75%"
    aria-valuenow="75"
    aria-valuemin="0"
    aria-valuemax="100"
    ></div>
    </div>
    <p>8000 Achieved</p>
    </div>
    </div>
    </div>
    <div class="col seats-detail d-flex align-items-center"></div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>

    <!-- card 7 -->
    <div>
    <div class="card list-card">
    <div class="row">
    <div class="col-md-6 col-lg-4">
    <div class="card-image h-100">
    <img class="h-100"
    class="card-img-top h-100"
    src="~/images/Grow-Trees-On-the-path-to-environment-sustainability-1.png"
    alt="Card image cap"
    />

    <!-- location favourite and pause mission  -->
    <div class="card-items">
    <a href="#" class="location d-inline">
    <img src="~/images/pin.png" alt="location" />
    <span>New York</span>
    </a>
    <a href="#" class="card-img-icon fav">
    <img src="~/images/heart.png" alt="like" />
    </a>
    <a href="#" class="card-img-icon pause-mission-icon">
    <img src="~/images/user.png" alt="add-mission" />
    </a>
    </div>

    <!-- mission theme capsule -->
    <div class="mission-theme mission-theme-list-view">
    <h3>Education</h3>
    </div>
    </div>
    </div>

    <!-- card content -->
    <div class="col-md-6 col-lg-8">
    <div class="row">
    <div class="col">
    <div class="border-0">
    <h2 class="card-title mt-3">
    Grow Trees - On the path to environment sustainability
    </h2>
    <p class="card-description">
    Some quick example text to build on the card title and make
    up the bulk of the card's content.
    </p>
    </div>
    </div>
    </div>

    <!-- organization and rating -->
    <div class="row">
    <div class="col-md-12 col-lg-6 mt-md-2">
    <div
    class="organization-rating mb-3 organization-rating-list-view border-0 text-start d-flex align-items-center"
    >
    <p
    class="organization mb-0 d-flex justify-content-md-between justify-content-lg-start column-gap-lg-3 card-text-medium"
    >
    Tree Canada
    </p>
    <div class="rating">
    <img src="~/images/selected-star.png" /><img
    src="~/images/selected-star.png"
    /><img src="~/images/selected-star.png" /><img
    src="~/images/selected-star.png"
    /><img src="~/images/selected-star.png" />
    </div>
    </div>

    <button
    class="align-left card-button card-button-list-view d-flex justify-content-between align-items-center"
    >
    View Details
    <img src="~/images/right-arrow.png" alt="" />
    <img src="~/images/right-arrow2.png" alt="" />
    </button>
    </div>

    <!-- <div
    class="mission-details col-md-12 col-lg-6 ms-auto mt-md-4 border-top"
    >
    <div class="">
    <p class="mission-date">From 10/01/2019 until 25/02/2019</p>
    <div
    class="row gutter mt-3 justify-content-around position-relative"
    >
    <div class="col seats-detail d-flex align-items-center">
    <img
    src="~/images/Seats-left.png"
    alt="star"
    />
    <div class="d-flex flex-column">
    <p>10</p>
    <p>Seats left</p>
    </div>
    </div>
    <div class="col duration-detail d-flex align-items-center">
    <img
    class="icon-detail"
    src="~/images/deadline.png"
    alt="star"
    />
    <div class="d-flex flex-column">
    <p>09/01/2019</p>
    <p>Deadline</p>
    </div>
    </div>
    </div>
    </div>
    </div> -->
    </div>
    </div>
    </div>
    </div>
    </div>*@
</div>